#!/usr/bin/env bash

set -euo pipefail

variables=(
    BOOTSTRAP_KEYMAP
    BOOTSTRAP_KEYMAP_TOGGLE
    BOOTSTRAP_FONT
    BOOTSTRAP_FONT_MAP
    BOOTSTRAP_FONT_UNIMAP
)

lines=()

for variable in "${variables[@]}"; do
    if [[ -v $variable ]]; then
        lines+=("${variable#BOOTSTRAP_}=${!variable}")
    fi
done

if ((${#lines[@]} > 0)); then
    printf "%s\n" "${lines[@]}" >"$BOOTSTRAP_TARGET_MOUNT_DIR"/etc/vconsole.conf
fi
