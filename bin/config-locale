#!/usr/bin/env bash

set -euo pipefail

variables=(
    BOOTSTRAP_LANG
    BOOTSTRAP_LANGUAGE
    BOOTSTRAP_LC_CTYPE
    BOOTSTRAP_LC_NUMERIC
    BOOTSTRAP_LC_TIME
    BOOTSTRAP_LC_COLLATE
    BOOTSTRAP_LC_MONETARY
    BOOTSTRAP_LC_MESSAGES
    BOOTSTRAP_LC_PAPER
    BOOTSTRAP_LC_NAME
    BOOTSTRAP_LC_ADDRESS
    BOOTSTRAP_LC_TELEPHONE
    BOOTSTRAP_LC_MEASUREMENT
    BOOTSTRAP_LC_IDENTIFICATION
)

lines=()

for variable in "${variables[@]}"; do
    if [[ -v $variable ]]; then
        lines+=("${variable#BOOTSTRAP_}=${!variable}")
    fi
done

if ((${#lines[@]} > 0)); then
    printf "%s\n" "${lines[@]}" >"$BOOTSTRAP_TARGET_MOUNT_DIR"/etc/locale.conf
fi
