#!/usr/bin/env bash

set -euo pipefail

name=$1
prompt="Enter $name"

input() {
    local reply

    read -r -s -p "$1: " reply
    echo >&2

    if [[ -z $reply ]]; then
        echo "ERROR: input value cannot be empty" >&2
        return 1
    fi

    echo "$reply"
}

reply=$(input "$prompt")
verify=$(input "$prompt (verify)")

if [[ "$reply" != "$verify" ]]; then
    echo "ERROR: input values did not match" >&2
    exit 1
fi

echo "$reply"
