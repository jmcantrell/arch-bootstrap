#!/usr/bin/env bash

set -euo pipefail

name=$1
prompt="Enter $name"

info() {
    echo "${0##*/}: $*" >&2
}

input() {
    local reply

    read -r -s -p "$1: " reply
    echo >&2

    if [[ -z $reply ]]; then
        info "input value cannot be empty"
        return 1
    fi

    echo "$reply"
}

reply=$(input "$prompt")
verify=$(input "$prompt (verify)")

if [[ "$reply" != "$verify" ]]; then
    info "input values did not match"
    exit 1
fi

echo "$reply"
