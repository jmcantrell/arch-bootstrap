#!/usr/bin/env bash

set -euo pipefail

opts=()

if [[ -f $BOOTSTRAP_LUKS_KEY_FILE ]]; then
    opts+=(--key-file "$BOOTSTRAP_LUKS_KEY_FILE")
fi

cryptsetup open "${opts[@]}" "$BOOTSTRAP_LUKS_DEVICE" "$BOOTSTRAP_LUKS_MAPPER_NAME"
