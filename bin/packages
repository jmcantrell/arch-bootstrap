#!/usr/bin/env bash

set -euo pipefail

packages_dir=$INSTALL_CONFIG/packages

cat "$packages_dir"/base

cat "$packages_dir"/"$INSTALL_BOOT_FIRMWARE"

if [[ -v INSTALL_USE_LUKS ]]; then
    cat "$packages_dir"/luks
fi

if [[ -v INSTALL_USE_WIRELESS ]]; then
    cat "$packages_dir"/wireless
fi

if [[ -v INSTALL_CPU_VENDOR ]]; then
    cat "$packages_dir"/"$INSTALL_CPU_VENDOR"
fi

if [[ -v INSTALL_ADMIN_SHELL ]]; then
    printf "%s\n" "${INSTALL_ADMIN_SHELL##*/}"
fi

config_file=$packages_dir/extra

if [[ -f $config_file ]]; then
    cat "$config_file"
fi
