#!/usr/bin/env bash

set -euo pipefail

cd "$BOOTSTRAP_CONFIG"/packages

cat base "$BOOTSTRAP_BOOT_FIRMWARE"

printf "%s\n" "$BOOTSTRAP_KERNEL_PACKAGE"

if [[ -v BOOTSTRAP_USE_LUKS ]]; then
    cat luks
fi

if [[ -v BOOTSTRAP_USE_WIRELESS ]]; then
    cat wireless
fi

if [[ -v BOOTSTRAP_CPU_VENDOR ]]; then
    cat "$BOOTSTRAP_CPU_VENDOR"
fi

if [[ -v BOOTSTRAP_ADMIN_SHELL_PACKAGE ]]; then
    printf "%s\n" "$BOOTSTRAP_ADMIN_SHELL_PACKAGE"
fi

if [[ -f extra ]]; then
    cat extra
fi
