#!/usr/bin/env bash

set -euo pipefail

exec > >(sort -u)

cd "$BOOTSTRAP_CONFIG_DIR"/packages

files=(
    base
    "$BOOTSTRAP_BOOT_FIRMWARE_PACKAGE_FILE"
    "$BOOTSTRAP_CPU_VENDOR_PACKAGE_FILE"
)

if ((BOOTSTRAP_USE_LUKS)); then
    files+=(luks)
fi

if ((BOOTSTRAP_USE_WIRELESS)); then
    files+=(wireless)
fi

if [[ -f extra ]]; then
    files+=(extra)
fi

cat "${files[@]}"
