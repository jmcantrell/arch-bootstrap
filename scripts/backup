#!/usr/bin/env bash

set -eu

config_dir=$PWD/configs/$HOSTNAME

from_paths=(
    /var/lib/iwd
    /var/cache/pacman/pkg
    "${XDG_CACHE_HOME:-~/.cache}"/pikaur/pkg
    ~/.dotfiles
)

for from_path in "${from_paths[@]}" "$@"; do
    if [[ -d $from_path ]]; then
        to_path=$config_dir/files/${from_path#/}
        mkdir -p "$to_path"
        sudo rsync -var --delete "$from_path"/ "$to_path"
    fi
done
